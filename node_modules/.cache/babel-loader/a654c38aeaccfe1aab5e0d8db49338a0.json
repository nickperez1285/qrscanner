{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/home_folder/Documents/qrscanner/qrscanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/home_folder/Documents/qrscanner/qrscanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/home_folder/Documents/qrscanner/qrscanner/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import'./RegistrationForm.css';import{API_BASE_URL,ACCESS_TOKEN_NAME}from'../../constants/apiConstants';import{withRouter}from\"react-router-dom\";function RegistrationForm(props){var _useState=useState({email:\"\",password:\"\",confirmPassword:\"\",successMessage:null}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var handleChange=function handleChange(e){var _e$target=e.target,id=_e$target.id,value=_e$target.value;setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},id,value));});};var sendDetailsToServer=function sendDetailsToServer(){if(state.email.length&&state.password.length){props.showError(null);var payload={\"email\":state.email,\"password\":state.password};axios.post(API_BASE_URL+'/user/register',payload).then(function(response){if(response.status===200){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{'successMessage':'Registration successful. Redirecting to home page..'});});localStorage.setItem(ACCESS_TOKEN_NAME,response.data.token);redirectToHome();props.showError(null);}else{props.showError(\"Some error ocurred\");}}).catch(function(error){console.log(error);});}else{props.showError('Please enter valid username and password');}};var redirectToHome=function redirectToHome(){props.updateTitle('Home');props.history.push('/home');};var redirectToLogin=function redirectToLogin(){props.updateTitle('Login');props.history.push('/login');};var handleSubmitClick=function handleSubmitClick(e){e.preventDefault();if(state.password===state.confirmPassword){sendDetailsToServer();}else{props.showError('Passwords do not match');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card col-12 col-lg-4 login-card mt-2 hv-center\",children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-left\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email\",value:state.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"small\",{id:\"emailHelp\",className:\"form-text text-muted\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-left\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Password\",value:state.password,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group text-left\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"confirmPassword\",placeholder:\"Confirm Password\",value:state.confirmPassword,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:handleSubmitClick,children:\"Register\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success mt-2\",style:{display:state.successMessage?'block':'none'},role:\"alert\",children:state.successMessage}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Already have an account? \"}),/*#__PURE__*/_jsx(\"span\",{className:\"loginText\",onClick:function onClick(){return redirectToLogin();},children:\"Login here\"})]})]});}export default withRouter(RegistrationForm);","map":{"version":3,"sources":["/Users/home_folder/Documents/qrscanner/qrscanner/src/components/RegistrationForm/RegistrationForm.js"],"names":["React","useState","axios","API_BASE_URL","ACCESS_TOKEN_NAME","withRouter","RegistrationForm","props","email","password","confirmPassword","successMessage","state","setState","handleChange","e","target","id","value","prevState","sendDetailsToServer","length","showError","payload","post","then","response","status","localStorage","setItem","data","token","redirectToHome","catch","error","console","log","updateTitle","history","push","redirectToLogin","handleSubmitClick","preventDefault","display"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport axios from 'axios';\nimport './RegistrationForm.css';\nimport {API_BASE_URL, ACCESS_TOKEN_NAME} from '../../constants/apiConstants';\nimport { withRouter } from \"react-router-dom\";\n\nfunction RegistrationForm(props) {\n    const [state , setState] = useState({\n        email : \"\",\n        password : \"\",\n        confirmPassword: \"\",\n        successMessage: null\n    })\n    const handleChange = (e) => {\n        const {id , value} = e.target   \n        setState(prevState => ({\n            ...prevState,\n            [id] : value\n        }))\n    }\n    const sendDetailsToServer = () => {\n        if(state.email.length && state.password.length) {\n            props.showError(null);\n            const payload={\n                \"email\":state.email,\n                \"password\":state.password,\n            }\n            axios.post(API_BASE_URL+'/user/register', payload)\n                .then(function (response) {\n                    if(response.status === 200){\n                        setState(prevState => ({\n                            ...prevState,\n                            'successMessage' : 'Registration successful. Redirecting to home page..'\n                        }))\n                        localStorage.setItem(ACCESS_TOKEN_NAME,response.data.token);\n                        redirectToHome();\n                        props.showError(null)\n                    } else{\n                        props.showError(\"Some error ocurred\");\n                    }\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });    \n        } else {\n            props.showError('Please enter valid username and password')    \n        }\n        \n    }\n    const redirectToHome = () => {\n        props.updateTitle('Home')\n        props.history.push('/home');\n    }\n    const redirectToLogin = () => {\n        props.updateTitle('Login')\n        props.history.push('/login'); \n    }\n    const handleSubmitClick = (e) => {\n        e.preventDefault();\n        if(state.password === state.confirmPassword) {\n            sendDetailsToServer()    \n        } else {\n            props.showError('Passwords do not match');\n        }\n    }\n    return(\n        <div className=\"card col-12 col-lg-4 login-card mt-2 hv-center\">\n            <form>\n                <div className=\"form-group text-left\">\n                <label htmlFor=\"exampleInputEmail1\">Email address</label>\n                <input type=\"email\" \n                       className=\"form-control\" \n                       id=\"email\" \n                       aria-describedby=\"emailHelp\" \n                       placeholder=\"Enter email\" \n                       value={state.email}\n                       onChange={handleChange}\n                />\n                <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with anyone else.</small>\n                </div>\n                <div className=\"form-group text-left\">\n                    <label htmlFor=\"exampleInputPassword1\">Password</label>\n                    <input type=\"password\" \n                        className=\"form-control\" \n                        id=\"password\" \n                        placeholder=\"Password\"\n                        value={state.password}\n                        onChange={handleChange} \n                    />\n                </div>\n                <div className=\"form-group text-left\">\n                    <label htmlFor=\"exampleInputPassword1\">Confirm Password</label>\n                    <input type=\"password\" \n                        className=\"form-control\" \n                        id=\"confirmPassword\" \n                        placeholder=\"Confirm Password\"\n                        value={state.confirmPassword}\n                        onChange={handleChange} \n                    />\n                </div>\n                <button \n                    type=\"submit\" \n                    className=\"btn btn-primary\"\n                    onClick={handleSubmitClick}\n                >\n                    Register\n                </button>\n            </form>\n            <div className=\"alert alert-success mt-2\" style={{display: state.successMessage ? 'block' : 'none' }} role=\"alert\">\n                {state.successMessage}\n            </div>\n            <div className=\"mt-2\">\n                <span>Already have an account? </span>\n                <span className=\"loginText\" onClick={() => redirectToLogin()}>Login here</span> \n            </div>\n            \n        </div>\n    )\n}\n\nexport default withRouter(RegistrationForm);"]},"metadata":{},"sourceType":"module"}